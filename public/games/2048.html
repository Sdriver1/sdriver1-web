<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2048 | Steven Driver Games</title>

    <link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="../assets/css/index.css" />
    <style>
      /* 2048 Game Styles */
      .game-container {
        padding: 2rem 1rem;
        max-width: 600px;
        margin: 0 auto;
        text-align: center;
      }

      .game-title {
        font-size: 2.5rem;
        font-weight: 600;
        color: var(--primary);
        margin-bottom: 1rem;
      }

      .game-subtitle {
        color: var(--text-secondary);
        font-size: 1.1rem;
        margin-bottom: 2rem;
      }

      .game-controls {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
        align-items: center;
        flex-wrap: wrap;
        justify-content: center;
      }

      .btn {
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .new-game-btn {
        background: var(--primary);
        color: white;
      }

      .new-game-btn:hover {
        background: var(--primary-dark);
      }

      .score-info {
        display: flex;
        gap: 2rem;
        margin-bottom: 1rem;
        color: var(--text);
        font-weight: 600;
        justify-content: center;
      }

      .score-box {
        background: var(--card-bg);
        padding: 0.5rem 1rem;
        border-radius: 8px;
        border: 1px solid var(--secondary);
      }

      .game-board {
        background: var(--card-bg);
        border-radius: 10px;
        padding: 1rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin: 0 auto;
        max-width: 400px;
      }

      .grid-container {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 8px;
        background: var(--bg-secondary);
        border-radius: 8px;
        padding: 8px;
      }

      .grid-cell {
        width: 80px;
        height: 80px;
        background: var(--card-bg);
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--text);
        transition: all 0.2s ease;
        border: 1px solid var(--secondary);
      }

      .tile {
        position: absolute;
        width: 80px;
        height: 80px;
        background: var(--primary);
        color: white;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        font-weight: 700;
        transition: all 0.15s ease-in-out;
      }

      .tile-2 {
        background: #eee4da;
        color: #776e65;
      }
      .tile-4 {
        background: #ede0c8;
        color: #776e65;
      }
      .tile-8 {
        background: #f2b179;
        color: #f9f6f2;
      }
      .tile-16 {
        background: #f59563;
        color: #f9f6f2;
      }
      .tile-32 {
        background: #f67c5f;
        color: #f9f6f2;
      }
      .tile-64 {
        background: #f65e3b;
        color: #f9f6f2;
      }
      .tile-128 {
        background: #edcf72;
        color: #f9f6f2;
        font-size: 1.3rem;
      }
      .tile-256 {
        background: #edcc61;
        color: #f9f6f2;
        font-size: 1.3rem;
      }
      .tile-512 {
        background: #edc850;
        color: #f9f6f2;
        font-size: 1.3rem;
      }
      .tile-1024 {
        background: #edc53f;
        color: #f9f6f2;
        font-size: 1.1rem;
      }
      .tile-2048 {
        background: #edc22e;
        color: #f9f6f2;
        font-size: 1.1rem;
      }

      .game-message {
        text-align: center;
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--primary);
        margin-top: 1rem;
        padding: 1rem;
        background: var(--card-bg);
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .instructions {
        color: var(--text-secondary);
        font-size: 0.9rem;
        margin-top: 1rem;
        max-width: 400px;
        line-height: 1.5;
      }

      /* Mobile responsiveness */
      @media (max-width: 768px) {
        .game-container {
          padding: 1rem;
        }

        .game-title {
          font-size: 2rem;
        }

        .grid-cell,
        .tile {
          width: 60px;
          height: 60px;
          font-size: 1.2rem;
        }

        .tile-128,
        .tile-256,
        .tile-512 {
          font-size: 1rem;
        }

        .tile-1024,
        .tile-2048 {
          font-size: 0.9rem;
        }

        .score-info {
          flex-direction: column;
          gap: 0.5rem;
          align-items: center;
        }
      }

      /* Theme toggle styling */
    </style>
  </head>

  <body>
    <header>
      <nav>
        <div class="logo">
          <a href="https://sdriver1.me"
            ><img src="../assets/images/profile.png" alt="Logo" loading="lazy"
          /></a>
        </div>
        <button
          id="mobile-toggle"
          class="mobile-toggle"
          aria-label="Toggle menu"
        >
          â˜°
        </button>
        <div
          class="nav-links"
          id="nav-links"
          role="navigation"
          aria-label="Main navigation"
        >
          <a href="https://games.sdriver1.me" aria-label="Games Portal"
            >Games Portal</a
          >
          <button
            class="theme-toggle"
            id="theme-toggle"
            aria-label="Toggle between light and dark theme"
          >
            <span id="theme-icon"></span>
          </button>
        </div>
      </nav>
    </header>

    <main>
      <div class="game-container">
        <h1 class="game-title">ðŸŽ¯ 2048</h1>
        <p class="game-subtitle">
          Slide numbered tiles on a grid to combine them and create a tile with
          the number 2048!
        </p>

        <div class="game-controls">
          <button class="btn new-game-btn" onclick="newGame()">New Game</button>
        </div>

        <div class="score-info">
          <div class="score-box">Score: <span id="score">0</span></div>
          <div class="score-box">Best: <span id="best-score">0</span></div>
        </div>

        <div class="game-board">
          <div class="grid-container" id="grid-container"></div>
        </div>

        <div id="game-message" class="game-message" style="display: none"></div>

        <div class="instructions">
          Use arrow keys (or WASD) to move tiles. When two tiles with the same
          number touch, they merge into one!
        </div>
      </div>
    </main>

    <footer>
      <div class="footer-content">
        <div class="footer-left">
          &copy; 2025 Steven Driver. All Rights Reserved.
        </div>
        <div class="footer-right">
          <!-- Bluesky -->
          <a
            href="https://bsky.app/profile/sdriver1.me"
            target="_blank"
            title="Bluesky"
          >
            <img
              src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/bluesky.svg"
              alt="Bluesky"
              class="footer-icon"
            />
          </a>
          <!-- Discord -->
          <a
            href="https://discord.com/users/691506668781174824"
            target="_blank"
            title="Discord"
          >
            <img
              src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/discord.svg"
              alt="Discord"
              class="footer-icon"
            />
          </a>
          <!-- Email -->
          <a href="mailto:sdriver@sdriver1.me" title="Email">
            <img id="icon-email" alt="Email" class="footer-icon" />
          </a>
          <a href="https://github.com/Sdriver1" target="_blank" title="GitHub">
            <img id="icon-github" alt="GitHub" class="footer-icon" />
          </a>

          <!-- Instagram -->
          <a
            href="https://www.instagram.com/sdriver_1/"
            target="_blank"
            title="Instagram"
          >
            <img
              src="../assets/svg/instagram.svg"
              alt="Instagram"
              class="footer-icon"
            />
          </a>
          <!-- LinkedIn -->
          <a
            href="https://sdriver1.me/linkedin"
            target="_blank"
            title="LinkedIn"
          >
            <img
              src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/linkedin.svg"
              alt="LinkedIn"
              class="footer-icon"
            />
          </a>
          <!-- Twitch -->
          <a href="https://twitch.tv/sdriver1" target="_blank" title="Twitch">
            <img
              src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/twitch.svg"
              alt="Twitch"
              class="footer-icon"
            />
          </a>
          <!-- X -->
          <a href="https://x.com/sdriver_1" target="_blank" title="Twitter / X">
            <img id="icon-x" alt="X" class="footer-icon" />
          </a>
          <!-- YouTube -->
          <a
            href="https://www.youtube.com/@sdriver_1"
            target="_blank"
            title="YouTube"
          >
            <img
              src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/youtube.svg"
              alt="YouTube"
              class="footer-icon"
            />
          </a>
        </div>
      </div>
    </footer>

    <script src="../assets/js/indexsite.js"></script>
    <script>
      // 2048 Game Logic
      let board = [];
      let score = 0;
      let bestScore = localStorage.getItem("2048-best") || 0;
      let hasWon = false;

      function initGame() {
        board = [
          [0, 0, 0, 0],
          [0, 0, 0, 0],
          [0, 0, 0, 0],
          [0, 0, 0, 0],
        ];
        score = 0;
        hasWon = false;
        document.getElementById("score").textContent = score;
        document.getElementById("best-score").textContent = bestScore;
        document.getElementById("game-message").style.display = "none";

        addNewTile();
        addNewTile();
        updateDisplay();
      }

      function addNewTile() {
        const emptyCells = [];
        for (let i = 0; i < 4; i++) {
          for (let j = 0; j < 4; j++) {
            if (board[i][j] === 0) {
              emptyCells.push({ row: i, col: j });
            }
          }
        }

        if (emptyCells.length > 0) {
          const randomCell =
            emptyCells[Math.floor(Math.random() * emptyCells.length)];
          board[randomCell.row][randomCell.col] = Math.random() < 0.9 ? 2 : 4;
        }
      }

      function updateDisplay() {
        const container = document.getElementById("grid-container");
        container.innerHTML = "";

        for (let i = 0; i < 4; i++) {
          for (let j = 0; j < 4; j++) {
            const cell = document.createElement("div");
            cell.className = "grid-cell";

            if (board[i][j] !== 0) {
              const tile = document.createElement("div");
              tile.className = `tile tile-${board[i][j]}`;
              tile.textContent = board[i][j];
              cell.appendChild(tile);
            }

            container.appendChild(cell);
          }
        }

        document.getElementById("score").textContent = score;

        if (score > bestScore) {
          bestScore = score;
          localStorage.setItem("2048-best", bestScore);
          document.getElementById("best-score").textContent = bestScore;
        }
      }

      function move(direction) {
        let moved = false;
        const newBoard = board.map((row) => [...row]);

        if (direction === "left" || direction === "right") {
          for (let i = 0; i < 4; i++) {
            let row = newBoard[i];
            if (direction === "right") row = row.reverse();

            // Remove zeros
            row = row.filter((val) => val !== 0);

            // Merge tiles
            for (let j = 0; j < row.length - 1; j++) {
              if (row[j] === row[j + 1]) {
                row[j] *= 2;
                score += row[j];
                row[j + 1] = 0;

                if (row[j] === 2048 && !hasWon) {
                  hasWon = true;
                  showMessage("ðŸŽ‰ You Win! ðŸŽ‰", "success");
                }
              }
            }

            // Remove zeros again
            row = row.filter((val) => val !== 0);

            // Add zeros to fill the row
            while (row.length < 4) {
              row.push(0);
            }

            if (direction === "right") row = row.reverse();

            // Check if this row changed
            for (let j = 0; j < 4; j++) {
              if (newBoard[i][j] !== row[j]) {
                moved = true;
              }
            }

            newBoard[i] = row;
          }
        } else {
          // up or down
          for (let j = 0; j < 4; j++) {
            let column = [];
            for (let i = 0; i < 4; i++) {
              column.push(newBoard[i][j]);
            }

            if (direction === "down") column = column.reverse();

            // Remove zeros
            column = column.filter((val) => val !== 0);

            // Merge tiles
            for (let i = 0; i < column.length - 1; i++) {
              if (column[i] === column[i + 1]) {
                column[i] *= 2;
                score += column[i];
                column[i + 1] = 0;

                if (column[i] === 2048 && !hasWon) {
                  hasWon = true;
                  showMessage("ðŸŽ‰ You Win! ðŸŽ‰", "success");
                }
              }
            }

            // Remove zeros again
            column = column.filter((val) => val !== 0);

            // Add zeros to fill the column
            while (column.length < 4) {
              column.push(0);
            }

            if (direction === "down") column = column.reverse();

            // Check if this column changed
            for (let i = 0; i < 4; i++) {
              if (newBoard[i][j] !== column[i]) {
                moved = true;
              }
              newBoard[i][j] = column[i];
            }
          }
        }

        if (moved) {
          board = newBoard;
          addNewTile();
          updateDisplay();

          if (isGameOver()) {
            showMessage("ðŸ’€ Game Over! ðŸ’€", "error");
          }
        }
      }

      function isGameOver() {
        // Check for empty cells
        for (let i = 0; i < 4; i++) {
          for (let j = 0; j < 4; j++) {
            if (board[i][j] === 0) return false;
          }
        }

        // Check for possible merges
        for (let i = 0; i < 4; i++) {
          for (let j = 0; j < 4; j++) {
            const current = board[i][j];
            if (
              (i < 3 && board[i + 1][j] === current) ||
              (j < 3 && board[i][j + 1] === current)
            ) {
              return false;
            }
          }
        }

        return true;
      }

      function showMessage(text, type) {
        const messageEl = document.getElementById("game-message");
        messageEl.textContent = text;
        messageEl.style.display = "block";
        messageEl.style.color = type === "success" ? "#4CAF50" : "#f44336";
      }

      function newGame() {
        initGame();
      }

      // Keyboard controls
      document.addEventListener("keydown", function (e) {
        e.preventDefault();
        switch (e.key) {
          case "ArrowLeft":
          case "a":
          case "A":
            move("left");
            break;
          case "ArrowRight":
          case "d":
          case "D":
            move("right");
            break;
          case "ArrowUp":
          case "w":
          case "W":
            move("up");
            break;
          case "ArrowDown":
          case "s":
          case "S":
            move("down");
            break;
        }
      });

      // Touch controls for mobile
      let startX, startY;
      const container = document.getElementById("grid-container");

      container.addEventListener("touchstart", function (e) {
        startX = e.touches[0].clientX;
        startY = e.touches[0].clientY;
      });

      container.addEventListener("touchend", function (e) {
        if (!startX || !startY) return;

        const endX = e.changedTouches[0].clientX;
        const endY = e.changedTouches[0].clientY;

        const diffX = startX - endX;
        const diffY = startY - endY;

        if (Math.abs(diffX) > Math.abs(diffY)) {
          // Horizontal swipe
          if (diffX > 0) {
            move("left");
          } else {
            move("right");
          }
        } else {
          // Vertical swipe
          if (diffY > 0) {
            move("up");
          } else {
            move("down");
          }
        }

        startX = null;
        startY = null;
      });

      // Initialize game
      document.addEventListener("DOMContentLoaded", function () {
        initGame();
      });
    </script>
  </body>
</html>
